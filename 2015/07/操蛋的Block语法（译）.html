<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Mac OS X version 5.4.0">
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width initial-scale=1'>
  <title>苹果梨的博客 - 操蛋的Block语法（译）</title>
  <link href='http://fonts.lug.ustc.edu.cn/css?family=Open+Sans:400italic,700italic,700,400&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link href='/css/github.css' rel='stylesheet' type='text/css'>
  <link href='/css/myblog.css' rel='stylesheet' type='text/css'>
</head>
<body class='typora-export'>
  <div id='write' class='is-mac'>
    <h1><a name='header-c7' class='md-header-anchor' id="header-c7"></a>操蛋的Block语法（译）</h1>
    <h3><a name='header-c8' class='md-header-anchor' id="header-c8"></a>在ObjC中如何定义一个Block</h3>
    <table>
      <thead>
        <tr>
          <th>更新时间</th>
          <th>更新内容</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>2015-07-05</td>
          <td>发布</td>
        </tr>
        <tr>
          <td>2017-01-17</td>
          <td>新增了nullability相关内容</td>
        </tr>
      </tbody>
    </table>
    <p>原文：<a href='http://fuckingblocksyntax.com/'>How Do I Declare A Block in Objective-C?</a></p>
    <p>ObjC的Block语法的确是很难记满蛋疼的，对于不想背语法的我来说（主要是大部分情况下可以智能补全），是时候写一个备忘记录一下了……</p>
    <p>时隔一年多看了一下原文，居然新增了nullability相关的修饰词，赶紧补上。</p>
    <p>本地变量：</p>
    <pre class='md-fences mock-cm' style='display:block;position:relative'>returnType (^blockName)(parameterTypes) = ^returnType(parameters) {...};</pre>
    <p>属性：</p>
    <pre class='md-fences mock-cm' style='display:block;position:relative'>@property (nonatomic, copy, nullability) returnType (^blockName)(parameterTypes);</pre>
    <p>方法的参数：</p>
    <pre class='md-fences mock-cm' style='display:block;position:relative'>- (void)someMethodThatTakesABlock:(returnType (^nullability)(parameterTypes))blockName;</pre>
    <p>调用方法时传参：</p>
    <pre class='md-fences mock-cm' style='display:block;position:relative'>[someObject someMethodThatTakesABlock:^returnType (parameters) {...}];</pre>
    <p>类型定义：</p>
    <pre class='md-fences mock-cm' style='display:block;position:relative'>typedef returnType (^TypeName)(parameterTypes);
TypeName blockName = ^returnType(parameters) {...};</pre>
    <p>这儿并不是用来罗列所有Block用法的列表。如果你发现你想要的语法没有在这里出现，那么很可能用一个类型定义（typedef）就可以使你的代码更有可读性了。</p>
    <p>如果你访问不了上面的原文链接，可能是因为域名里有屏蔽词，试试<a href='http://goshdarnblocksyntax.com'>这个链接</a>。</p>
    <hr>
    <p>© 2017 苹果梨　　<a href='/'>首页</a>　　<a href='/about.html'>关于</a>　　<a href='https://github.com/HarrisonXi'>GitHub</a>　　<a href='mailto:gpra8764@gmail.com'>Email</a></p>
  </div>
</body>
</html>
